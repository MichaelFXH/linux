# Kickstart file automatically generated by anaconda.

#version=DEVEL
install
text
reboot
url --url=http://192.168.0.10/centos/6/
lang en_US.UTF-8
keyboard us
network --onboot yes --device eth0 --bootproto static --ip 192.168.0.16 --netmask 255.255.0.0 --noipv6
rootpw  --iscrypted $6$b6C5mM/BwOMBoK8H$cYZFrHoNlOL0iDsxOTRhwnWJ3yfFmf7mRJBOxEqGoI56UMrT8J7qlrGwX7tSnOf7wKxYR2hAvAREILDgOgsFe1
firewall --disabled
authconfig --enableshadow --passalgo=sha512
selinux --disabled
timezone Asia/Shanghai
bootloader --location=mbr --driveorder=sda --append="crashkernel=auto rhgb quiet"
# The following is the partition information you requested
# Note that any partitions you deleted are not expressed
# here so unless you clear all partitions first, this is
# not guaranteed to work
zerombr
clearpart --all --initlabel

part /boot --fstype=ext4 --size=1024
part / --fstype=ext4 --size=50000
part /data --fstype=ext4 --size=30000

part swap --size=2048


repo --name="CentOS"  --baseurl=http://192.168.0.10/centos/6/ --cost=100

%packages
@core
@server-policy
@workstation-policy
autofs
vim-enhanced
%end

%post
useradd feng 
echo centos | passwd --stdin feng &> /dev/null
mkdir  /etc/yum.repos.d/bak
mv /etc/yum.repos.d/* /etc/yum.repos.d/bak
cat > /etc/yum.repos.d/base.repo <<EOF
[base]
name=base
baseurl=file:///misc/cd
gpgcheck=0
EOF

mkdir /root/.ssh
cat > /root/.ssh/authorized_keys <<EOF
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCZRMD+7Zx9BAajEqj7RegvU5NpwqtxT987GfBm1t3/HJ69f3VTIWZ7+Y9ySMDeZpT8aw5RQ+DBARVA79GGoZkELC8nZsPZiBxGf56abVwGL9EMJjkZiVuC1ifEuYNqh5RJM7TedwAaZESwEKMoxHlj678ORdsXJFMwO5BAXyDIkBRPwQ8YNBGrNssQNtflmdkJimM3woBGx/mrYN75tWCAp8U7dBzrXG7vjaMSb2ZdRsafKAJIzB3aXLcuuPUhxyHr6VTH43YEpN00Ca4rx5DloNOjmyfIpgWR+kP1GXbR5pat8pKFOxZbK96STclmUMSnYhqGy559aR7L0XF/urjh root@centos7.localdomain
EOF
chmod 600 /root/.ssh/authorized_keys
chmod 700 /root/.ssh

%end

